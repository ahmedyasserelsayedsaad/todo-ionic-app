"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6264],{6264:(R,b,m)=>{m.r(b),m.d(b,{AddTodoPageModule:()=>F});var y=m(177),P=m(4341),s=m(4742),_=m(7791),u=m(467),f=m(7464),g=function(a){return a.Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS",a}(g||{}),h=function(a){return a.Rear="REAR",a.Front="FRONT",a}(h||{}),T=function(a){return a.Uri="uri",a.Base64="base64",a.DataUrl="dataUrl",a}(T||{});class M extends f.E_{getPhoto(o){var d=this;return(0,u.A)(function*(){return new Promise(function(){var t=(0,u.A)(function*(n,r){if(o.webUseInput||o.source===g.Photos)d.fileInputExperience(o,n,r);else if(o.source===g.Prompt){let i=document.querySelector("pwa-action-sheet");i||(i=document.createElement("pwa-action-sheet"),document.body.appendChild(i)),i.header=o.promptLabelHeader||"Photo",i.cancelable=!1,i.options=[{title:o.promptLabelPhoto||"From Photos"},{title:o.promptLabelPicture||"Take Picture"}],i.addEventListener("onSelection",function(){var l=(0,u.A)(function*(c){0===c.detail?d.fileInputExperience(o,n,r):d.cameraExperience(o,n,r)});return function(c){return l.apply(this,arguments)}}())}else d.cameraExperience(o,n,r)});return function(n,r){return t.apply(this,arguments)}}())})()}pickImages(o){var d=this;return(0,u.A)(function*(){return new Promise(function(){var t=(0,u.A)(function*(n,r){d.multipleFileInputExperience(n,r)});return function(n,r){return t.apply(this,arguments)}}())})()}cameraExperience(o,d,t){var n=this;return(0,u.A)(function*(){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=o.direction===h.Front?"user":"environment",document.body.appendChild(r);try{yield r.componentOnReady(),r.addEventListener("onPhoto",function(){var i=(0,u.A)(function*(l){const c=l.detail;null===c?t(new f.I9("User cancelled photos app")):c instanceof Error?t(c):d(yield n._getCameraPhoto(c,o)),r.dismiss(),document.body.removeChild(r)});return function(l){return i.apply(this,arguments)}}()),r.present()}catch{n.fileInputExperience(o,d,t)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),n.fileInputExperience(o,d,t)})()}fileInputExperience(o,d,t){let n=document.querySelector("#_capacitor-camera-input");const r=()=>{var i;null===(i=n.parentNode)||void 0===i||i.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input",n.type="file",n.hidden=!0,document.body.appendChild(n),n.addEventListener("change",i=>{const l=n.files[0];let c="jpeg";if("image/png"===l.type?c="png":"image/gif"===l.type&&(c="gif"),"dataUrl"===o.resultType||"base64"===o.resultType){const p=new FileReader;p.addEventListener("load",()=>{if("dataUrl"===o.resultType)d({dataUrl:p.result,format:c});else if("base64"===o.resultType){const x=p.result.split(",")[1];d({base64String:x,format:c})}r()}),p.readAsDataURL(l)}else d({webPath:URL.createObjectURL(l),format:c}),r()}),n.addEventListener("cancel",i=>{t(new f.I9("User cancelled photos app")),r()})),n.accept="image/*",n.capture=!0,o.source===g.Photos||o.source===g.Prompt?n.removeAttribute("capture"):o.direction===h.Front?n.capture="user":o.direction===h.Rear&&(n.capture="environment"),n.click()}multipleFileInputExperience(o,d){let t=document.querySelector("#_capacitor-camera-input-multiple");const n=()=>{var r;null===(r=t.parentNode)||void 0===r||r.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",r=>{const i=[];for(let l=0;l<t.files.length;l++){const c=t.files[l];let p="jpeg";"image/png"===c.type?p="png":"image/gif"===c.type&&(p="gif"),i.push({webPath:URL.createObjectURL(c),format:p})}o({photos:i}),n()}),t.addEventListener("cancel",r=>{d(new f.I9("User cancelled photos app")),n()})),t.accept="image/*",t.click()}_getCameraPhoto(o,d){return new Promise((t,n)=>{const r=new FileReader,i=o.type.split("/")[1];"uri"===d.resultType?t({webPath:URL.createObjectURL(o),format:i,saved:!1}):(r.readAsDataURL(o),r.onloadend=()=>{const l=r.result;t("dataUrl"===d.resultType?{dataUrl:l,format:i,saved:!1}:{base64String:l.split(",")[1],format:i,saved:!1})},r.onerror=l=>{n(l)})})}checkPermissions(){var o=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw o.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw o.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var o=this;return(0,u.A)(function*(){throw o.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var o=this;return(0,u.A)(function*(){throw o.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var o=this;return(0,u.A)(function*(){throw o.unavailable("Not implemented on web.")})()}}new M;const v=(0,f.F3)("Camera",{web:()=>new M});var e=m(3953),C=m(3303);function A(a,o){if(1&a){const d=e.RV6();e.j41(0,"ion-button",18),e.bIt("click",function(){e.eBV(d);const n=e.XpG();return e.Njj(n.takephoto())}),e.nrm(1,"ion-icon",19),e.EFF(2," Add Img "),e.k0s()}}function k(a,o){if(1&a&&e.nrm(0,"img",20),2&a){const d=e.XpG();e.Y8G("src",d.imgSrc,e.B4B)}}const E=[{path:"",component:(()=>{var a;class o{constructor(t,n){this.todoService=t,this.toastCtrl=n}ngOnInit(){}takephoto(){var t=this;return(0,u.A)(function*(){try{const r=(yield v.getPhoto({resultType:T.Uri,source:g.Prompt,quality:60})).webPath;if(t.imgSrc=r,console.log(" image dataUrl:",t.imgSrc),console.log(" image webPath:",r),r)try{const i=yield t.todoService.uploadImage(r);console.log("Image uploaded successfully:",i),t.imgr=i.image}catch(i){console.error("Error uploading image:",i)}else console.error("Image path is undefined.")}catch(n){console.error("Error taking picture:",n)}})()}addTask(){var t=this;return(0,u.A)(function*(){if(t.title&&t.description&&t.dueDate)try{const n={image:t.imgr,title:t.title,desc:t.description,priority:t.priority,dueDate:t.dueDate},r=yield t.todoService.addToDo(n).toPromise();console.log("Todo added successfully:",r),yield(yield t.toastCtrl.create({message:"Todo added successfully",mode:"ios",duration:1500})).present(),t.imgSrc=void 0,t.title="",t.description="",t.priority="medium",t.dueDate=""}catch(n){console.log("Error adding todo:",n),yield(yield t.toastCtrl.create({message:"Failed to add todo",mode:"ios",duration:1500})).present()}else yield(yield t.toastCtrl.create({message:"Please fill all fields",mode:"ios",duration:1500})).present()})()}}return(a=o).\u0275fac=function(t){return new(t||a)(e.rXU(C.n),e.rXU(s.K_))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-add-todo"]],decls:36,vars:7,consts:[[1,"ion-margin-bottom"],["slot","start"],["defaultHref","/todos"],[1,"add-img-container"],["expand","block","fill","outline","color","tertiary",3,"click",4,"ngIf"],[3,"src",4,"ngIf"],["lines","none"],["placeholder","Enter title here...",3,"ngModelChange","ngModel"],["placeholder","Enter description here...",3,"ngModelChange","ngModel"],["lines","none",1,"prio"],["placeholder","Select Priority",3,"ngModelChange","ngModel"],["value","high"],["value","medium"],["value","low"],["type","text","format","DD-MM-YYYY","placeholder","Enter due date DD-MM-YYYY",3,"ngModelChange","ngModel"],["name","calendar-outline","slot","end",2,"color","purple","font-size","22px"],[2,"color","red"],["expand","block","color","tertiary",1,"add-task-button",3,"click"],["expand","block","fill","outline","color","tertiary",3,"click"],["name","add-outline"],[3,"src"]],template:function(t,n){1&t&&(e.j41(0,"ion-content")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Add new task"),e.k0s()(),e.j41(6,"div",3),e.DNE(7,A,3,0,"ion-button",4)(8,k,1,1,"img",5),e.k0s(),e.j41(9,"h6"),e.EFF(10,"Task title"),e.k0s(),e.j41(11,"ion-item",6)(12,"ion-input",7),e.mxI("ngModelChange",function(i){return e.DH7(n.title,i)||(n.title=i),i}),e.k0s()(),e.j41(13,"h6"),e.EFF(14,"Task Description"),e.k0s(),e.j41(15,"ion-item",6)(16,"ion-textarea",8),e.mxI("ngModelChange",function(i){return e.DH7(n.description,i)||(n.description=i),i}),e.k0s()(),e.j41(17,"h6"),e.EFF(18,"task prlority"),e.k0s(),e.j41(19,"ion-item",9)(20,"ion-select",10),e.mxI("ngModelChange",function(i){return e.DH7(n.priority,i)||(n.priority=i),i}),e.j41(21,"ion-select-option",11),e.EFF(22,"high"),e.k0s(),e.j41(23,"ion-select-option",12),e.EFF(24,"medium"),e.k0s(),e.j41(25,"ion-select-option",13),e.EFF(26,"low"),e.k0s()()(),e.j41(27,"h6"),e.EFF(28,"Due date"),e.k0s(),e.j41(29,"ion-item",6)(30,"ion-input",14),e.mxI("ngModelChange",function(i){return e.DH7(n.dueDate,i)||(n.dueDate=i),i}),e.nrm(31,"ion-icon",15),e.k0s()(),e.j41(32,"h2",16),e.EFF(33),e.k0s(),e.j41(34,"ion-button",17),e.bIt("click",function(){return n.addTask()}),e.EFF(35," Add task "),e.k0s()()),2&t&&(e.R7$(7),e.Y8G("ngIf",!n.imgSrc),e.R7$(),e.Y8G("ngIf",n.imgSrc),e.R7$(4),e.R50("ngModel",n.title),e.R7$(4),e.R50("ngModel",n.description),e.R7$(4),e.R50("ngModel",n.priority),e.R7$(10),e.R50("ngModel",n.dueDate),e.R7$(3),e.JRh(n.imgr))},dependencies:[y.bT,P.BC,P.vS,s.Jm,s.QW,s.W9,s.iq,s.$w,s.uz,s.Nm,s.Ip,s.nc,s.BC,s.ai,s.Je,s.Gw,s.el],styles:["ion-header[_ngcontent-%COMP%]{--background: #fff}ion-content[_ngcontent-%COMP%]{--background: #f8f9fa}ion-toolbar[_ngcontent-%COMP%]{--background: #f9f9f9;--color: rgb(17, 17, 17)}ion-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.add-img-container[_ngcontent-%COMP%]{margin:24px 0;text-align:center}.add-img-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:60px;border:2px dashed #8e44ad;color:#8e44ad}.add-img-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}.add-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:250px;border-radius:5px}ion-item[_ngcontent-%COMP%]{--background: rgba(243, 240, 240, .797);border-radius:18px;padding:0 10px;margin-bottom:16px;margin-top:20px;color:#6a696b}.add-task-button[_ngcontent-%COMP%]{margin-top:24px;--border-radius: 12px;font-weight:700}.prio[_ngcontent-%COMP%]{--background: #a56df4a1;font-weight:bolder;color:#0c0c0c}h6[_ngcontent-%COMP%]{color:gray;font-weight:600;padding-left:10px;text-transform:capitalize}"]}),o})()}];let w=(()=>{var a;class o{}return(a=o).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[_.iI.forChild(E),_.iI]}),o})(),F=(()=>{var a;class o{}return(a=o).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[y.MD,P.YN,s.bv,w]}),o})()}}]);